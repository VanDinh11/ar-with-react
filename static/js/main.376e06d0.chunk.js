(this["webpackJsonpmy-web-ar"]=this["webpackJsonpmy-web-ar"]||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var o,i,a,l,s,c,d,r,u,m,y,p,b,f=n(3),h=n(4),v=n.n(h),x=n(6),g=n.n(x),w=(n(14),n(0)),j=n(7),E=n(8),O=(n(15),n(16),n(1)),S=n(2),B=function(){function e(){Object(O.a)(this,e)}return Object(S.a)(e,null,[{key:"createButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("button");function o(){var o=null;function i(t){t.addEventListener("end",a),e.xr.setReferenceSpaceType("local"),e.xr.setSession(t),n.textContent="Stop XR",o=t}function a(){o.removeEventListener("end",a),n.textContent="Start XR",o=null}n.style.display="",n.style.cursor="pointer",n.style.right="20px",n.style.width="100px",n.style.backgroundColor="#fff",n.textContent="Start XR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){null===o?navigator.xr.requestSession("immersive-ar",t).then(i):o.end()}}function i(){n.style.display="",n.style.cursor="auto",n.style.right="20px",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function a(){i(),n.textContent="XR NOT SUPPORTED"}function l(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="#fff",e.style.color="#333",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="10001"}if("xr"in navigator)return n.id="ARButton",n.style.display="none",l(n),navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?o():a()})).catch(a),n;var s=document.createElement("a");return!1===window.isSecureContext?(s.href=document.location.href.replace(/^http:/,"https:"),s.innerHTML="WEBXR NEEDS HTTPS"):(s.href="https://immersiveweb.dev/",s.innerHTML="WEBXR NOT AVAILABLE"),s.style.left="calc(50% - 90px)",s.style.width="180px",s.style.textDecoration="none",l(s),s}}]),e}(),I=null,k=!1,C=!0,z=function(){function e(){s.visible&&(u.position.setFromMatrixPosition(s.matrix),u.visible=!0)}function t(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight)}function n(t){u&&a.remove(u),document.getElementById("loader-model").style.display="block",(new E.a).setPath("3d/").load(t,(function(t){(c=t.scene).traverse((function(e){e.isMesh&&(e.castShadow=!0)}));var n=new w.ab(200,200);n.rotateX(-Math.PI/2);var o=new w.ob({color:0});o.opacity=.5,(r=new w.M(n,o)).receiveShadow=!0,(u=new w.q).add(c),u.add(r),a.add(u);var i=new w.d;i.setFromObject(u),i.getCenter(d.target),e(),document.getElementById("loader-model").style.display="none",d.update(),v()}))}function v(e,t){if(t){var n=l.xr.getReferenceSpace(),o=l.xr.getSession();if(!1===k&&(o.requestReferenceSpace("viewer").then((function(e){o.requestHitTestSource({space:e}).then((function(e){I=e}))})),o.addEventListener("end",(function(){k=!1,I=null,s.visible=!1;var e=new w.d;e.setFromObject(u),e.getCenter(d.target),document.getElementById("place-button").style.display="none",document.getElementById("group-zoom").style.display="none"})),k=!0),I){var c=t.getHitTestResults(I);if(c.length){var r=c[0];document.getElementById("group-zoom").style.display="block",C?(document.getElementById("place-button").style.display="block",document.getElementById("zoom-in-button").style.display="block",document.getElementById("zoom-out-button").style.display="block",s.visible=!0):(document.getElementById("place-button").style.display="none",document.getElementById("zoom-in-button").style.display="none",document.getElementById("zoom-out-button").style.display="none",s.visible=!1),s.matrix.fromArray(r.getPose(n).transform.matrix)}else s.visible=!1}}l.render(a,i)}return Object(h.useEffect)((function(){!function(){o=document.getElementById("container"),a=new w.nb,i=new w.Z(70,window.innerWidth/window.innerHeight,.001,200);var e=new w.k(14540253,.8);e.position.set(0,5,-1),e.castShadow=!0,a.add(e);var n=new w.a(16777215);a.add(n),(l=new w.Eb({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),l.setSize(window.innerWidth,window.innerHeight),l.shadowMap.enabled=!0,l.shadowMap.type=w.Y,l.xr.enabled=!0,o.appendChild(l.domElement),(d=new j.a(i,l.domElement)).addEventListener("change",v),d.minDistance=2,d.maxDistance=10,d.target.set(0,0,0);var c={requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"]};function r(){u&&s&&I&&(u.rotation.y+=b/100)}c.domOverlay={root:document.getElementById("ui-content")},document.body.appendChild(B.createButton(l,c)),(s=new w.M(new w.mb(.015,.02,32).rotateX(-Math.PI/2),new w.N)).matrixAutoUpdate=!1,s.visible=!1,a.add(s),window.addEventListener("resize",t,!1),l.domElement.addEventListener("touchstart",(function(e){e.preventDefault(),m=!0,y=e.touches[0].pageX,p=e.touches[0].pageY}),!1),l.domElement.addEventListener("touchend",(function(e){e.preventDefault(),m=!1}),!1),l.domElement.addEventListener("touchmove",(function(e){e.preventDefault(),m&&(b=e.touches[0].pageX-y,e.touches[0].pageY-p,y=e.touches[0].pageX,p=e.touches[0].pageY,r())}),!1)}(),l.setAnimationLoop(v),document.getElementById("ARButton").addEventListener("click",(function(){u&&(u.visible=!1)}))}),[]),Object(f.jsx)("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:Object(f.jsxs)("div",{id:"ui-content",children:[Object(f.jsxs)("div",{id:"mySidenav",className:"sidenav",children:[Object(f.jsx)("a",{href:"#",className:"closebtn",onClick:function(e){e.preventDefault(),document.getElementById("mySidenav").style.width="0"},children:"\xd7"}),Object(f.jsx)("a",{className:"ar-object",id:"ar-obj-1",href:"#",onClick:function(e){e.preventDefault(),n("dancing_girl.gltf")},children:"item 1"}),Object(f.jsx)("a",{className:"ar-object",id:"ar-obj-2",href:"#",onClick:function(e){e.preventDefault(),n("matilda.gltf")},children:"item 2"}),Object(f.jsx)("a",{className:"ar-object",id:"ar-obj-3",href:"#",onClick:function(e){e.preventDefault(),n("samurai_mayumi_rescale.glb")},children:"item 3"})]}),Object(f.jsx)("span",{className:"buttonMenu",style:{fontSize:"30px",cursor:"pointer"},onClick:function(e){e.preventDefault(),document.getElementById("mySidenav").style.width="250px"},children:"\u2630"}),Object(f.jsx)("button",{type:"button",id:"place-button",onClick:e,children:"PLACE"}),Object(f.jsxs)("div",{id:"group-zoom",children:[Object(f.jsx)("button",{id:"hide-button",type:"button",onClick:function(){var e=document.getElementById("hide-button");C=!C,e.innerHTML=C?"Hide UI":"Show UI"},children:"Hide UI"}),Object(f.jsx)("button",{id:"zoom-in-button",type:"button",onClick:function(){u&&s.visible&&(u.scale.x+=.1,u.scale.y+=.1,u.scale.z+=.1)},children:"+"}),Object(f.jsx)("button",{id:"zoom-out-button",type:"button",onClick:function(){u&&s.visible&&u.scale.x>.2&&u.scale.y>.2&&u.scale.z>.2&&(u.scale.x-=.1,u.scale.y-=.1,u.scale.z-=.1)},children:"-"})]}),Object(f.jsx)("div",{id:"container",style:{position:"fixed"}}),Object(f.jsx)("div",{id:"loader-model",children:Object(f.jsx)("span",{children:"Loading..."})})]})})};g.a.render(Object(f.jsx)(v.a.Fragment,{children:Object(f.jsx)(z,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.376e06d0.chunk.js.map