(this["webpackJsonpmy-web-ar"]=this["webpackJsonpmy-web-ar"]||[]).push([[0],{15:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var o,i,a,l,c,s,r,d,u,m,p,y,b,f,h=n(3),v=n(4),x=n.n(v),g=n(7),j=n.n(g),w=(n(15),n(6)),E=n(0),O=n(8),S=n(9),k=(n(16),n(17),n(18),n(1)),B=n(2),I=function(){function e(){Object(k.a)(this,e)}return Object(B.a)(e,null,[{key:"createButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("button");function o(){var o=null;function i(t){t.addEventListener("end",a),e.xr.setReferenceSpaceType("local"),e.xr.setSession(t),n.textContent="Stop XR",o=t}function a(){o.removeEventListener("end",a),n.textContent="Start XR",o=null}n.style.display="none",n.style.cursor="pointer",n.style.right="20px",n.style.width="100px",n.style.backgroundColor="#fff",n.textContent="Start XR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){null===o?navigator.xr.requestSession("immersive-ar",t).then(i):o.end()}}function i(){n.style.display="",n.style.cursor="auto",n.style.right="20px",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function a(){i(),n.textContent="XR NOT SUPPORTED"}function l(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="#fff",e.style.color="#333",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="10001"}if("xr"in navigator)return n.id="ARButton",n.style.display="none",l(n),navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?o():a()})).catch(a),n;var c=document.createElement("a");return!1===window.isSecureContext?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",l(c),c}}]),e}(),C=null,R=!1,z=!0,L=function(){var e=Object(v.useState)(1),t=Object(w.a)(e,2),n=t[0],x=(t[1],Object(v.useState)(!0)),g=Object(w.a)(x,2),j=g[0],k=g[1];function B(){c.visible&&(u.position.setFromMatrixPosition(c.matrix),u.visible=!0)}function L(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight)}function D(e){u&&a.remove(u),document.getElementById("loader-model").style.display="block",(new S.a).setPath("3d/").load(e,(function(e){(s=e.scene).traverse((function(e){e.isMesh&&(e.castShadow=!0)}));var t=new E.ab(200,200);t.rotateX(-Math.PI/2);var n=new E.ob({color:0});n.opacity=.5,(d=new E.M(t,n)).receiveShadow=!0,(u=new E.q).add(s),u.add(d),a.add(u);var o=new E.d;o.setFromObject(u),o.getCenter(r.target),B(),document.getElementById("loader-model").style.display="none",document.getElementById("ARButton").style.display="block",r.update(),k(!1),M()}))}function N(){requestAnimationFrame(N),!1!==f.ready&&undefined.update(f.domElement),M()}function M(e,t){if(t){var n=l.xr.getReferenceSpace(),o=l.xr.getSession();if(!1===R&&(o.requestReferenceSpace("viewer").then((function(e){o.requestHitTestSource({space:e}).then((function(e){C=e}))})),o.addEventListener("end",(function(){R=!1,C=null,c.visible=!1;var e=new E.d;e.setFromObject(u),e.getCenter(r.target),document.getElementById("place-button").style.display="none",document.getElementById("group-zoom").style.display="none"})),R=!0),C){var s=t.getHitTestResults(C);if(s.length){var d=s[0];document.getElementById("group-zoom").style.display="block",z?(document.getElementById("place-button").style.display="block",document.getElementById("zoom-in-button").style.display="block",document.getElementById("zoom-out-button").style.display="block",c.visible=!0):(document.getElementById("place-button").style.display="none",document.getElementById("zoom-in-button").style.display="none",document.getElementById("zoom-out-button").style.display="none",c.visible=!1),c.matrix.fromArray(d.getPose(n).transform.matrix)}else c.visible=!1}}l.render(a,i)}return Object(v.useEffect)((function(){switch(o=document.getElementById("container"),a=new E.nb,i=new E.Z(70,window.innerWidth/window.innerHeight,.001,200),function(){var e=new E.k(14540253,.8);e.position.set(0,5,-1),e.castShadow=!0,a.add(e);var t=new E.a(16777215);a.add(t)}(),(l=new E.Eb({antialias:!0,alpha:!0})).setClearColor(new E.i("lightgrey"),0),l.setPixelRatio(window.devicePixelRatio),l.setSize(window.innerWidth,window.innerHeight),l.gammaOutput=!0,l.shadowMap.enabled=!0,l.shadowMap.type=E.Y,1===n&&(l.xr.enabled=!0),o.appendChild(l.domElement),(r=new O.a(i,l.domElement)).addEventListener("change",M),r.minDistance=2,r.maxDistance=10,r.target.set(0,0,0),function(){var e={requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"]};e.domOverlay={root:document.getElementById("ui-content")},document.body.appendChild(I.createButton(l,e))}(),(c=new E.M(new E.mb(.015,.02,32).rotateX(-Math.PI/2),new E.N)).matrixAutoUpdate=!1,c.visible=!1,a.add(c),function(){function e(){u&&c&&C&&(u.rotation.y+=b/100)}l.domElement.addEventListener("touchstart",(function(e){e.preventDefault(),m=!0,p=e.touches[0].pageX,y=e.touches[0].pageY}),!1),l.domElement.addEventListener("touchend",(function(e){e.preventDefault(),m=!1}),!1),l.domElement.addEventListener("touchmove",(function(t){t.preventDefault(),m&&(b=t.touches[0].pageX-p,t.touches[0].pageY-y,p=t.touches[0].pageX,y=t.touches[0].pageY,e())}),!1)}(),window.addEventListener("resize",L,!1),document.getElementById("ARButton").addEventListener("click",(function(){u&&(u.visible=!1)})),n){case 0:N();break;case 1:l.setAnimationLoop(M)}}),[]),Object(h.jsxs)("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:[Object(h.jsxs)("div",{className:"wrap-intro",style:{display:j?"flex":"none"},children:[Object(h.jsx)("p",{children:'Select an item then press "Start XR"'}),Object(h.jsx)("p",{children:"You need to scan the floor until a ring appears on your screen."})]}),Object(h.jsxs)("div",{id:"ui-content",children:[Object(h.jsxs)("div",{id:"mySidenav",className:"sidenav",children:[Object(h.jsx)("a",{href:"#",className:"closebtn",onClick:function(e){e.preventDefault(),document.getElementById("mySidenav").style.width="0"},children:"\xd7"}),Object(h.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),D("old_sofa_free.glb")},children:"item 1"}),Object(h.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),D("eames_lounge_chair.gltf")},children:"item 2"}),Object(h.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),D("lamp.glb")},children:"item 3"}),Object(h.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),D("antique_iron_safe.glb")},children:"item 4"}),Object(h.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),D("dancing_girl.gltf")},children:"item 5"})]}),Object(h.jsx)("span",{className:"buttonMenu",style:{fontSize:"30px",cursor:"pointer"},onClick:function(e){e.preventDefault(),document.getElementById("mySidenav").style.width="250px"},children:"\u2630"}),Object(h.jsx)("button",{type:"button",id:"place-button",onClick:B,children:"PLACE"}),Object(h.jsxs)("div",{id:"group-zoom",children:[Object(h.jsx)("button",{id:"hide-button",type:"button",onClick:function(){var e=document.getElementById("hide-button");z=!z,e.innerHTML=z?"Hide UI":"Show UI"},children:"Hide UI"}),Object(h.jsx)("button",{id:"zoom-in-button",type:"button",onClick:function(){u&&c.visible&&(u.scale.x+=.1,u.scale.y+=.1,u.scale.z+=.1)},children:"+"}),Object(h.jsx)("button",{id:"zoom-out-button",type:"button",onClick:function(){u&&c.visible&&u.scale.x>.2&&u.scale.y>.2&&u.scale.z>.2&&(u.scale.x-=.1,u.scale.y-=.1,u.scale.z-=.1)},children:"-"})]}),Object(h.jsx)("div",{id:"container",style:{position:"fixed"}}),Object(h.jsx)("div",{id:"loader-model",children:Object(h.jsx)("div",{className:"lds-circle",children:Object(h.jsx)("div",{})})})]})]})};j.a.render(Object(h.jsx)(x.a.Fragment,{children:Object(h.jsx)(L,{})}),document.getElementById("root"))}},[[19,1,2]]]);