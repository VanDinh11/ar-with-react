(this["webpackJsonpmy-web-ar"]=this["webpackJsonpmy-web-ar"]||[]).push([[0],{15:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var o,i,l,a,c,s,r,d,u,m,y,p,b,f,h,v=n(3),g=n(4),x=n.n(g),w=n(6),j=n.n(w),E=(n(15),n(9)),O=n(0),k=n(7),B=n(8),S=(n(16),n(17),n(18),n(1)),I=n(2),C=function(){function e(){Object(S.a)(this,e)}return Object(I.a)(e,null,[{key:"createButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("button");function o(){var o=null;function i(t){t.addEventListener("end",l),e.xr.setReferenceSpaceType("local"),e.xr.setSession(t),n.textContent="Stop XR",o=t}function l(){o.removeEventListener("end",l),n.textContent="Start XR",o=null}n.style.display="none",n.style.cursor="pointer",n.style.right="20px",n.style.width="100px",n.style.backgroundColor="#fff",n.textContent="Start XR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){null===o?navigator.xr.requestSession("immersive-ar",t).then(i):o.end()}}function i(){n.style.display="",n.style.cursor="auto",n.style.right="20px",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function l(){i(),n.textContent="XR NOT SUPPORTED"}function a(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="#fff",e.style.color="#333",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="10001"}if("xr"in navigator)return n.id="ARButton",n.style.display="none",a(n),navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?o():l()})).catch(l),n;var c=document.createElement("a");return!1===window.isSecureContext?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",a(c),c}}]),e}(),z=null,R=!1,L=!0,D="ar-with-react/3d/",M=function(){var e=Object(g.useState)(1),t=Object(E.a)(e,2),n=t[0];t[1];function x(){c.visible&&(u.position.setFromMatrixPosition(c.matrix),u.visible=!0)}function w(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)}function j(e){u&&l.remove(u),document.getElementById("loader-model").style.display="block",(new B.a).setPath(D).load(e,(function(e){(s=e.scene).traverse((function(e){e.isMesh&&(e.castShadow=!0)}));var t=new O.ab(200,200);t.rotateX(-Math.PI/2);var n=new O.ob({color:0});n.opacity=.5,(d=new O.M(t,n)).receiveShadow=!0,(u=new O.q).add(s),u.add(d),l.add(u);var o=new O.d;o.setFromObject(u),o.getCenter(r.target),x(),document.getElementById("loader-model").style.display="none",document.getElementById("ARButton").style.display="block",r.update(),I()}))}function S(){requestAnimationFrame(S),!1!==f.ready&&h.update(f.domElement),I()}function I(e,t){if(t){var n=a.xr.getReferenceSpace(),o=a.xr.getSession();if(!1===R&&(o.requestReferenceSpace("viewer").then((function(e){o.requestHitTestSource({space:e}).then((function(e){z=e}))})),o.addEventListener("end",(function(){R=!1,z=null,c.visible=!1;var e=new O.d;e.setFromObject(u),e.getCenter(r.target),document.getElementById("place-button").style.display="none",document.getElementById("group-zoom").style.display="none"})),R=!0),z){var s=t.getHitTestResults(z);if(s.length){var d=s[0];document.getElementById("group-zoom").style.display="block",L?(document.getElementById("place-button").style.display="block",document.getElementById("zoom-in-button").style.display="block",document.getElementById("zoom-out-button").style.display="block",c.visible=!0):(document.getElementById("place-button").style.display="none",document.getElementById("zoom-in-button").style.display="none",document.getElementById("zoom-out-button").style.display="none",c.visible=!1),c.matrix.fromArray(d.getPose(n).transform.matrix)}else c.visible=!1}}a.render(l,i)}return Object(g.useEffect)((function(){switch(o=document.getElementById("container"),l=new O.nb,i=new O.Z(70,window.innerWidth/window.innerHeight,.001,200),function(){var e=new O.k(14540253,.8);e.position.set(0,5,-1),e.castShadow=!0,l.add(e);var t=new O.a(16777215);l.add(t)}(),(a=new O.Eb({antialias:!0,alpha:!0})).setClearColor(new O.i("lightgrey"),0),a.setPixelRatio(window.devicePixelRatio),a.setSize(window.innerWidth,window.innerHeight),a.gammaOutput=!0,a.shadowMap.enabled=!0,a.shadowMap.type=O.Y,1===n&&(a.xr.enabled=!0),o.appendChild(a.domElement),(r=new k.a(i,a.domElement)).addEventListener("change",I),r.minDistance=2,r.maxDistance=10,r.target.set(0,0,0),function(){var e={requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"]};e.domOverlay={root:document.getElementById("ui-content")},document.body.appendChild(C.createButton(a,e))}(),(c=new O.M(new O.mb(.015,.02,32).rotateX(-Math.PI/2),new O.N)).matrixAutoUpdate=!1,c.visible=!1,l.add(c),function(){function e(){u&&c&&z&&(u.rotation.y+=b/100)}a.domElement.addEventListener("touchstart",(function(e){e.preventDefault(),m=!0,y=e.touches[0].pageX,p=e.touches[0].pageY}),!1),a.domElement.addEventListener("touchend",(function(e){e.preventDefault(),m=!1}),!1),a.domElement.addEventListener("touchmove",(function(t){t.preventDefault(),m&&(b=t.touches[0].pageX-y,t.touches[0].pageY-p,y=t.touches[0].pageX,p=t.touches[0].pageY,e())}),!1)}(),window.addEventListener("resize",w,!1),document.getElementById("ARButton").addEventListener("click",(function(){u&&(u.visible=!1)})),n){case 0:S();break;case 1:a.setAnimationLoop(I)}}),[]),Object(v.jsx)("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:Object(v.jsxs)("div",{id:"ui-content",children:[Object(v.jsxs)("div",{id:"mySidenav",className:"sidenav",children:[Object(v.jsx)("a",{href:"#",className:"closebtn",onClick:function(e){e.preventDefault(),document.getElementById("mySidenav").style.width="0"},children:"\xd7"}),Object(v.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),j("old_sofa_free.glb")},children:"item 1"}),Object(v.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),j("eames_lounge_chair.glb")},children:"item 2"}),Object(v.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),j("lamp.glb")},children:"item 3"}),Object(v.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),j("antique_iron_safe.glb")},children:"item 4"}),Object(v.jsx)("a",{className:"ar-object",href:"#",onClick:function(e){e.preventDefault(),j("dusty_old_bookshelf_free.glb")},children:"item 5"})]}),Object(v.jsx)("span",{className:"buttonMenu",style:{fontSize:"30px",cursor:"pointer"},onClick:function(e){e.preventDefault(),document.getElementById("mySidenav").style.width="250px"},children:"\u2630"}),Object(v.jsx)("button",{type:"button",id:"place-button",onClick:x,children:"PLACE"}),Object(v.jsxs)("div",{id:"group-zoom",children:[Object(v.jsx)("button",{id:"hide-button",type:"button",onClick:function(){var e=document.getElementById("hide-button");L=!L,e.innerHTML=L?"Hide UI":"Show UI"},children:"Hide UI"}),Object(v.jsx)("button",{id:"zoom-in-button",type:"button",onClick:function(){u&&c.visible&&(u.scale.x+=.1,u.scale.y+=.1,u.scale.z+=.1)},children:"+"}),Object(v.jsx)("button",{id:"zoom-out-button",type:"button",onClick:function(){u&&c.visible&&u.scale.x>.2&&u.scale.y>.2&&u.scale.z>.2&&(u.scale.x-=.1,u.scale.y-=.1,u.scale.z-=.1)},children:"-"})]}),Object(v.jsx)("div",{id:"container",style:{position:"fixed"}}),Object(v.jsx)("div",{id:"loader-model",children:Object(v.jsx)("div",{class:"lds-circle",children:Object(v.jsx)("div",{})})})]})})};j.a.render(Object(v.jsx)(x.a.Fragment,{children:Object(v.jsx)(M,{})}),document.getElementById("root"))}},[[19,1,2]]]);